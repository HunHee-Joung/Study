## 콘텐츠 제작 자동화 시스템 구축에 사용된 주요 서비스와 도구들은 다음과 같습니다:

*   **GPT 4O-MINI(OPENAI)**: https://platform.openai.com/ 이 시스템의 핵심 에이전트 역할을 하며, 디렉터이자 편집자 역할을 동시에 수행합니다. 캐릭터 디자인부터 스토리 기획, 이미지 생성, 영상 제작, 나레이션, 자막, 배경 음악, 편집 효과, 피드백 반영까지 모든 것을 100% 자동으로 완성시키는 데 사용됩니다. MCP와 연동되어 전체 제작 파이프라인을 제어하며, 단계별 지침을 따르거나 필요에 따라 단계를 건너뛰는 등 유연하게 작업을 컨트롤합니다.
*   **n8n (엔에잇엔)**: https://n8n.io/ MCP 도구와 함께 사용되어 쇼츠 자동화 시스템을 구축하는 데 활용됩니다. 다양한 제작 파이프라인을 동시에 제어할 수 있도록 구성되어 있으며, 워크플로를 통해 여러 도구들을 연결하고 자동화하는 역할을 합니다.
*   **MCP 서버 (Model Context Protocal)**: https://n8n.io/ n8n 워크플로를 클로드와 연결하기 위한 서버입니다. 클로드에게 API 형태로 노출되어 클로드가 이 서버를 통해 다양한 도구들을 호출하고 활용할 수 있도록 합니다.
*   **OpenRouter (오픈 라우터)**: LLM(거대 언어 모델) 연동을 위해 OpenRouter라는 API 서비스를 사용했습니다. 이 서비스를 통해 여러 회사의 모델들(OpenAI, Claude, Gemini 등)을 하나의 API 키로 전환하며 사용할 수 있습니다.
*   **Replicate (리플리케이트)**: https://replicate.com/ 이미지 생성을 위한 API 서비스로, HTTP Request 노드를 통해 Replicate API의 규칙에 따라 이미지를 생성 요청하는 데 사용됩니다.
*   **Plausible (플럭스)**: 이미지 생성 노드에서 사용된 이미지 모델입니다. 특히 Plausible의 1.1 dev 모델을 사용하여 이미지 퀄리티에 신경을 썼습니다.
*   **AWS S3 (Amazon Web Services Simple Storage Service)**: https://aws.amazon.com/ 생성된 이미지, 오디오 파일, 최종 동영상 등을 저장하고 퍼블릭 URL을 통해 접근할 수 있도록 하는 저장소 서비스입니다. 구글 드라이브와 달리 지속적인 퍼블릭 URL을 제공한다는 장점 때문에 선택되었습니다.
*   **CloudFront (클라우드 프런트)**: S3에 저장된 파일의 URI 값을 가져오기 위해 사용되는 CDN(콘텐츠 전송 네트워크) 서비스입니다.
*   **Gemini API (제미나이 API)**: https://gemini.google.com/ 이미지 편집 노드에서 이미지의 일관성을 유지하면서 특정 부분을 수정하는 데 사용되었습니다. Gemini 2.0 모델을 사용하여 이미지와 텍스트 프롬프트를 함께 줄 수 있는 기능을 활용합니다.
*   **Pipedream (파일AI)**: https://fal.ai/ 이미지를 비디오로 변환하는 데 사용된 서비스입니다. 이미지나 동영상 관련 AI 모델들의 API 서비스를 제공하며, 파일AI의 Cliq 2.1 모델을 통해 이미지만으로도 5초 분량의 AI 동영상을 생성합니다.
*   **ElevenLabs (일레븐 랩스)**: https://elevenlabs.io/ @elevenlabs/n8n-nodes-elevenlabs 동영상에 삽입될 나레이션을 생성하는 데 사용된 텍스트-투-스피치 서비스입니다. 자연스러운 성우 목소리를 생성하며, 사용자 지정 목소리 복제 기능도 지원합니다.
*   **MediaFX (미디어 FX)**: n8n-nodes-mediafx 동영상 렌더링을 위해 개발된 사용자 정의 n8n 노드입니다. 이미지와 동영상, 자막 등을 합쳐 하나의 동영상을 만들며, 배경 음악 삽입, 자막 삽입, 나레이션 삽입, 장면 병합 및 전환 효과(페이드인/페이드아웃) 등을 처리합니다. 외부 렌더링 API 서비스(Critomate, Zayson Video)의 비용 문제 때문에 직접 개발하여 사용자의 컴퓨터 리소스를 활용하는 방식으로 구현되었습니다.


##  Prompt 
```
# 목표
 아래 요청 내용에 따라 6개 장면으로 구성된 귀여운 동물 쇼츠 동영상을 제작한다. 
 MCP를 이용해서 아래 단계별로 진행한다. 
 주어진 컨셉을 따라 진행한다. 
	캐릭터 컨셉 : 카운터 앞 토끼 은행원 깔끔한 유니폼, 복슬복슬 꼬리
	스토리 컨셉 : “0원 통장→저금 시작” 통장에 첫 코인을 “짤랑!” 넣으며 새출발을 선언 
 단계별 중간 결과물 (URL) 은 다음 단계로 넘어가기전에 |장면No.|장면설명|URL| 로 표로 출력한다.
## 단계별 사용 도구(MCP)
1단계 : 스토리 기획(Generate Short Video Story)
2단계 : 캐릭터 생성(Generate Character Prompt)
3단계 : 장면별 이미지 생성(Generate AI Image) : 1단계 와 2단계 프롬프트 결합하여 요청
4단계 : 장면별 동영상 생성(Generate Image to Video): 3단계 응답 프롬프트로 요청. 실패하더라도 생성은 1회만 요청.
5단계 : 동영상 다운로드(Download Generated AI Video) : 생성 중인 경우, 계속 완료 결과를 응답받을 때까지 반복 요청.
6단계 : 장면별 나레이션 생성(Generate Narration) : 1단계의 caption 프롬프트로 요청.
7단계 : 동영상 렌더링(Rendering Final Shorts Video) : 1단계, 3단계, 5단계, 6단계 의 장면별 에셋과 배경음악으로 렌더링 요청.
배경음악 주소 : https://dspnumvazg60a.cloudfront.net/sound/호기심 많은 하루.mp3
<img width="862" height="408" alt="image" src="https://github.com/user-attachments/assets/849c26ff-6795-4645-97f4-571506a37d73" />
```



# 쇼츠 자동화 시스템 개요

## 1. 시스템 목표 및 특징
   *   귀엽고 재밌는 유머러스한 동물 쇼츠 영상 제작
   *   자동화 범위: 캐릭터 디자인, 스토리 기획, 이미지 생성, 영상 제작, 나레이션, 자막, 배경 음악, 편집 효과, 피드백 반영 등 100% 자동 완성
   *   기존 방식과의 차이점:
        *   영상 편집 툴 불필요: 프리미어, 캡컷 등 수작업 편집 없이 자동화
        *   계획 자동화: 캐릭터부터 스토리까지 GPT(4o-mini)가 알아서 다함
        *   대화형 피드백 반영: 캐릭터 표정, 의상 변경 등 부분 편집 및 효과 삽입, 피드백 반영을 대화로 해결
        *   일관성/품질 관리: 캐릭터 일관성, 스토리 퀄리티 자동 관리

## 2. 핵심 구성 요소

### 2.1. MCP (Model Context Protocol)
   *   역할: GPT가 디렉터이자 편집자 역할 동시 수행
   *   N8N 제어: N8N의 모든 제작 파이프라인 동시 제어
   *   서버 구축: MCP 서버 트리거 노드 추가, URL 자동 생성 및 GPT에 연결
   *   보안: Bearer Authentication 설정, 토큰 생성으로 원격 접속 차단
   *   도구 연결:
        *   N8N 워크플로 툴: N8N 워크플로를 도구화하여 MCP에 연결
            *   이름: 영문명 권장
            *   설명: 에이전트 이해를 돕기 위해 상세 설명 추가 (영문/한글 무관)
            *   인자값(파라미터): 추가 디스크립션으로 에이전트 혼동 방지

### 2.2. N8N (Workflow Automation Tool)
   *   워크플로우 타입:
        *   순차적인 워크플로: 유연성 없고 수정 불가
        *   에이전틱 타입: GPT가 디렉터/편집자 역할을 하며 유연성 높음
   *   주요 노드:
        *   Trigger (When executed by another workflow): 다른 워크플로우에서 호출할 수 있는 트리거 노드
            *   입력 방식: 유필드 벨로우(여러 파라미터 수신)
            *   데이터 타입: 문자열(String), 숫자, 참/거짓(Boolean), 배열, 객체 지원
        *   AI Agent 노드:
            *   프롬프트: 일반 지침, 세부 지침으로 나눠 전달하여 에이전트 이해도 향상
            *   LLM 모델: OpenRouter (다수 모델 통합 API), OpenAI, 4o-mini, Gemini 등 교체 가능
            *   파서 구조: 원하는 JSON 응답 구조 부여
            *   Auto-fix Format: LLM의 JSON 형식 오류 발생 시 자동 교정 (구조 복잡할 경우 유용)
        *   HTTP Request 노드: Replicate, File AI 등 전용 노드 없을 때 API 요청에 사용
            *   메서드: GET (일반 정보 요청), POST (특정 쿼리문 전송)
            *   헤더: `Prefer: wait` (응답 대기) 등 설정
            *   인증: Bearer Token 등
        *   S3 Upload 노드 (AWS S3): 이미지, 오디오, 영상 등 파일 저장 및 주소 반환
            *   URL 필요성: 구글 드라이브와 달리 퍼블릭 URI 지속 제공
            *   설정: 버킷명, 파일 경로명 지정 (아이디 값 활용하여 중복 방지)
            *   퍼블릭 URI: CloudFront CDN 서비스를 통해 가져옴
        *   If 노드: 조건에 따라 참/거짓 경로로 분기
        *   Wait 노드: 일정 시간 대기 (예: 동영상 생성 완료 대기 시 GPT 세션 끊김 방지)
        *   Aggregate 노드: 여러 주소(예: 6개 장면 URL)를 배열 형태로 집계하여 처리 용이하게 함
        *   Field Set 노드: 상수값 정의 및 반환
    *   커스텀 노드:
        *   ElevenLabs N8N 노드: 자연스러운 나레이션(성우 목소리) 생성
            *   보이스 설정: 다양한 보이스 선택, 사용자 목소리 복제 기능
            *   상세 세팅: 안정성, 일관성, 톤, 속도 조절 가능
            *   다국어 지원: 한국어 지원 모델 활용
        *   Media FX N8N 노드: 영상 렌더링 전용 커스텀 노드 (개발자 자체 개발)
            *   비용 절감: Creatomate, Zayson Video 등 유료 API 대체
            *   기능: 영상 병합, 자르기, 전환 효과(페이드인/아웃, 와이프, 슬라이드 등), 오디오 추출/믹스, 자막 삽입, 이미지-비디오 변환, 스탬프 이미지, 폰트 지원 등
            *   자막 삽입: 특정 구간 지정, 폰트(한글 지원 폰트 포함), 사이즈, 색상, 위치 등 설정
            *   나레이션/배경 음악 믹스: 볼륨 조절, 특정 구간 삽입(Partial Mix), 반복 재생, 페이드인/아웃 효과

## 3. 콘텐츠 제작 파이프라인 (단계별)
   *   전체 오케스트레이션: GPT(4o-mini)가 각 N8N 워크플로 도구를 호출하며 전체 흐름 제어
   *   1단계: 스토리 기획
       *   도구: "제넬레 숏 비디오 스토리 (Generate Short Video Story)"
       *   LLM: Gemini 2.5 Pro (기획 품질 중시)
       *   결과: 6개 장면 플롯 기획, AI 이미지 생성용 영어 프롬프트, 자막(12자 이내), 나레이션 지침 생성
   *   2단계: 캐릭터/이미지 생성
       *   도구: "AI Image"
       *   이미지 모델: 플럭스(Playback)의 데브 모델 (이미지 퀄리티 중시)
       *   일관성 유지: 3D 애니메이션/디즈니/픽사 스타일의 서픽스(Suffix) 프롬프트 사용
       *   API: Replicate API 활용 (HTTP Request 노드)
       *   이미지 편집 (선택 사항): "AI Image Editor" - Gemini API 활용, 특정 부분 수정하여 이미지 일관성 유지
   *   3단계: 비디오 생성
       *   도구: "제넬의 이미지 비디오 (Generate AI Video)"
       *   서비스: File AI (Click 2.1 모델) - 이미지/동영상 AI 모델 API 서비스
       *   입력: 이미지 URL만 전달 (프롬프트 제공 시 부자연스러운 경험 방지)
       *   GPT 세션 제한(32초) 고려: 생성 요청과 상태 확인/다운로드 분리
   *   4단계: 비디오 다운로드
       *   도구: "다운로드 제레이트 AI 비디오 (Download Generated AI Video)"
       *   역할: 생성 상태 조회(2회 진행), 미생성 시 GPT에게 다시 요청하도록 알림
   *   5단계: 나레이션 생성
       *   도구: "제넬의 이미지 나레이션 (Generate Narration)"
       *   서비스: ElevenLabs
       *   N8N 노드: ElevenLabs 커스텀 노드 사용
   *   6단계: 최종 렌더링
       *   도구: "렌더링 파이널 쇼츠 비디오 (Render Final Shorts Video)"
       *   N8N 노드: Media FX 커스텀 노드 활용
       *   과정:
           *   장면별 데이터셋 수신
           *   배경 음악 고정값으로 삽입 (AI 생성 가능)
           *   루프 노드를 통해 장면별 동영상 생성 (자막, 나레이션 삽입)
           *   Aggreagate 노드로 영상 주소 취합
           *   영상 병합 및 전환 효과(페이드인/아웃 등) 삽입
           *   배경 음악 믹스 (볼륨 조절, 길이 조절, 페이드아웃)
           *   S3에 최종 영상 저장 후 URL 리턴

## 4. GPT(4o-mini) 연동 및 활용
   *   연동 방법:
       *   GPT '검색 및 도구'에서 '통합 추가하기'
       *   연동 이름, MCP 서버 트리거의 프로덕션 URL 입력
       *   N8N MCP 서버 워크플로우 활성화 확인
   *   프롬프트 지침:
       *   목표: 명확한 전체 목표 제시 (예: 6개 장면 동물 쇼츠 영상 제작)
       *   도구 사용 지시: "무조건 MCP를 사용해라"
       *   컨셉: 캐릭터, 스토리 컨셉 제공 (예: 판교 햄스터 직장인 이야기)
       *   중간 결과물 출력 유도: 피드백/수정 요청을 위해 중간 과정 출력 요구
       *   단계별 지침: 기획, 이미지 생성, 동영상 생성, 렌더링 등 순차적 지시
       *   세부 지시: 배경 음악 URL 등 구체적 정보 제공
   *   GPT의 역할:
       *   오케스트레이션: 각 단계별 워크플로 도구들을 활용하여 전체 흐름을 컨트롤
       *   실패 제어: 워크플로 실패 시 GPT가 시나리오들을 컨트롤하여 강건하게 처리
   *   피드백 반영: 특정 장면 수정 요청 시, GPT가 해당 부분만 수정하여 동영상 다시 렌더링 가능

## 5. 주요 장점
   *   완전 자동화: 기획부터 제작, 편집까지 모든 과정 자동화
   *   높은 유연성: 짜여진 시나리오가 아닌 실제 업무처럼 에이전트와 대화하며 피드백 및 제작
   *   강력한 도구 조합: MCP와 N8N의 조합으로 다양한 목표 달성 가능
   *   안정성: MCP 도구 사용 시 거의 실수 없이 안정적으로 진행
   *   비용 절감: Media FX 커스텀 노드를 통해 유료 렌더링 API 서비스 불필요

## 6. 추가 정보
   *   가이드 및 강의: MCP 서버 구축, Replicate API 사용, S3 설정, CloudFront 설정 등 상세 가이드 제공

## 초롱이 쇼츠 모음 (클릭)
[![초롱이 쇼츠 #1](https://img.youtube.com/vi/MytKkev4qaw/0.jpg)](https://youtube.com/shorts/MytKkev4qaw?feature=share)  
[![초롱이 쇼츠 #2](https://img.youtube.com/vi/JeNg1QdQW4I/0.jpg)](https://youtube.com/shorts/JeNg1QdQW4I?feature=share)  
[![초롱이 쇼츠 #3](https://img.youtube.com/vi/S_WVLGNs_FE/0.jpg)](https://youtube.com/shorts/S_WVLGNs_FE?feature=share)  


## 7. 소스 정보 ( ./AWS Replicate/xxx ) 
```
📄 영상생성 자동화 MCP.json
├── 📁 기획
│   └── 📄 영상생성 기획 워크플로.json
├── 📁 이미지 처리
│   ├── 📄 Flux 이미지생성.json
│   └── 📄 Gemini 이미지 편집기.json
├── 📁 영상 생성
│   ├── 📄 Fal.ai Kling 2.1 동영상 생성기.json
│   └── 📄 Fal.ai Kling 2.1 동영상 다운로드.json
├── 📁 오디오 생성
│   └── 📄 ElevenLabs 나레이션 생성기.json
└── 📁 렌더링
    └── 📄 쇼츠 동영상 렌더링.json
```

