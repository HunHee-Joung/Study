
# n8n 워크플로에서 AI 에이전트 활용 (이메일 내용 변경 중심)

## 1. AI 에이전트의 이해
   -   **기존 AI 서비스:** "뭐뭐 해 줘" (질문 답변, 글쓰기, 그림 그리기, 문서 요약 등)
       -   한계: 시키는 건 잘하지만 '2% 부족한' 느낌
   -   **AI 에이전트:** "뭐뭐를 이때 이렇게 처리해 줘" (스스로 판단하고 척척 일 처리)
       -   비유: '야무진' 아이 (일일이 묻지 않고 알아서 처리)
       -   특징: 단순 대화를 넘어 사용자의 목표를 이해하고, 행동하며, 결과를 만들어냄
       -   구분: 기존 챗봇은 '응답형', AI 에이전트는 '행동형'
       -   예시: 병원 예약, 뉴스 요약 발송, 고객 문의 자동 정리 및 알림, 웹사이트 링크 요약 등
       -   가능성: 아직 100% 완벽하진 않으나 무궁무진한 잠재력 보유

## 2. n8n 이란?
   -   **정의:** AI 에이전트를 직접 만들 수 있는 툴 (워크플로 제작 도구)
   -   **기능:** 다양한 앱들(구글 스프레드시트, Gmail, 캘린더, Slack, Discord, 데이터베이스, Notion 등) 연결
   -   **주요 장점:**
       -   **코딩 불필요:** 코딩 없이도 복잡한 자동화 워크플로 구축 가능
   -   **비용:** n8n 자체는 무료이나, 연결하는 앱(예: ChatGPT) 사용 시 비용 발생 가능
   -   **언어:** 아쉽지만 아직 한국어를 제공하지 않음 (영어 화면에 익숙해지는 것을 권장)

## 3. n8n 워크플로의 기본 구조
   -   **워크플로:** 왼쪽에서 오른쪽으로 순차적으로 일이 처리되는 과정을 그림으로 표현한 것
   -   **노드:** 워크플로를 구성하는 각각의 작업 단위
   -   **트리거(Trigger):** 워크플로의 시작 신호 (예: 채팅 메시지, 스케줄)

## 4. AI 에이전트를 활용한 이메일 내용 변경 (단계별 레벨업)

### 4.1. 레벨 1: 기본 워크플로 구성 및 AI 출력값 활용
   -   **워크플로 흐름:** 채팅 → AI 에이전트 → 이메일 전송
   -   **단계별 설정:**
       1.  **워크플로 생성:** '워크플로 만들기' 클릭 → '+' 버튼 클릭
       2.  **'On Chat Message' 노드 추가 (트리거):** 워크플로 시작 신호
       3.  **'AI Agent' 노드 추가 (주인공):**
           -   **챗 모델 설정:** AI 에이전트의 '두뇌' (예: GPT 45 미니)
               -   '크리덴셜(Credential)' 설정 필수: 본인 인증/신원 확인 (무료 크레딧 또는 사용료 지불 증명)
           -   **'Source Prompt' 설정:** AI 에이전트가 할 일 지정 (예: "명언 한 가지를 알려줘")
               -   AI 에이전트 설정창: 왼쪽은 '인풋(Input)', 오른쪽은 '아웃풋(Output)'
       4.  **'Gmail' 노드 추가 (이메일 전송):**
           -   **'크리덴셜' 설정:** Gmail 계정 인증 필수
           -   **이메일 내용 동적 변경:**
               -   제목 설정 (예: "오늘의 명언")
               -   **내용에 AI 에이전트의 '아웃풋(명언)'을 '변수'로 끌어다 붙여넣기**
                   -   변수: 중괄호로 표시되며, 내용이 동적으로 결정됨
   -   **실행 확인:** 채팅창에 메시지 입력 → 워크플로 실행 → 이메일 수신 확인

### 4.2. 레벨 2: 외부 데이터 연동 및 AI 에이전트 역할 변경
   -   **워크플로 흐름:** 채팅 → HTTP Request → AI 에이전트 → 이메일 전송
   -   **단계별 설정:**
       1.  **'HTTP Request' 노드 추가 (외부 데이터 가져오기):**
           -   위치: '채팅' 노드와 'AI Agent' 노드 사이
           -   용도: 'API'를 사용하여 다른 웹사이트(예: 뉴스 API)의 내용 가져오기
               -   API: 다른 웹사이트 내용을 가져올 수 있는 '비밀번호'
               -   API 키, URL, 파라미터(예: 컨트리=US) 설정
                   -   모든 정보는 API 공식 문서에 명시됨
       2.  **'AI Agent' 노드 역할 변경:**
           -   **'Source Prompt' 수정:** "신문 기사들을 요약해 주는 역할"로 변경
           -   'HTTP Request' 노드에서 가져온 '뉴스 데이터'를 프롬프트에 '변수'로 넣어 요약 지시
       3.  **'Gmail' 노드 내용 확장:**
           -   제목: "오늘의 뉴스"로 변경
           -   내용: AI 에이전트가 요약한 **'기사 요약본' 변수 삽입**
   -   **실행 확인:** 채팅 → 워크플로 실행 → 최신 뉴스 요약 이메일 수신 확인

### 4.3. 레벨 3: 다중 수신자에게 개인화된 이메일 전송
   -   **워크플로 흐름:** 채팅 → HTTP Request → Google Sheets → AI 에이전트 → Gmail (여러 명에게)
   -   **단계별 설정:**
       1.  **'Google Sheets' 노드 추가 (수신자 목록 가져오기):**
           -   위치: 'AI Agent' 노드와 'Gmail' 노드 사이
           -   용도: 구글 시트에 작성된 '이름'과 '이메일 주소' 목록 읽어오기
           -   **'크리덴셜' 설정:** 구글 계정 인증 필수
           -   문서 및 시트 선택 후 실행하여 데이터 확인
       2.  **'Gmail' 노드 수정 (개인화된 이메일):**
           -   **받는 주소:** 'Google Sheets' 노드에서 가져온 '이메일' 변수로 변경
           -   **이메일 제목 개인화:** "오늘의 뉴스" 대신 '이름' 변수를 사용하여 "**{{이름}}님을 위한 뉴스**"와 같이 변경
   -   **실행 확인:** 워크플로 실행 → 구글 시트 목록의 모든 사람에게 개인화된 뉴스 이메일 발송 확인

### 4.4. 레벨 4: 워크플로 자동 실행 예약
   -   **워크플로 흐름:** Schedule Trigger → HTTP Request → Google Sheets → AI 에이전트 → Gmail (자동)
   -   **단계별 설정:**
       1.  **'Schedule Trigger' 노드 추가 (자동 실행 예약):**
           -   위치: 워크플로의 맨 앞에 위치시켜 기존 '채팅' 트리거 대체
           -   **예약 설정:** 얼마나 자주, 몇 시 몇 분에 워크플로를 시작할지 설정 (예: 매일 아침 9시)
               -   'Days' 필드에 '1'을 입력하면 매일 실행
       2.  **워크플로 활성화:** 저장 버튼 클릭 시 워크플로가 '활성화' 상태인지 확인 (비활성화 시 작동 안 함)
   -   **실행 확인:** 설정된 시간에 자동으로 워크플로가 실행되고 이메일이 발송되는지 확인

## 5. n8n 추가 활용 팁
   -   **템플릿 사용:** 다른 사용자들이 이미 만들어 놓은 워크플로를 가져와 수정하고 활용 가능
   -   **Self-hosting:** 무료로 n8n을 계속 사용하기 위한 방법 (별도 학습 필요)

이러한 단계를 통해 n8n 워크플로에서 AI 에이전트를 활용하여 이메일 내용을 단순한 답변을 넘어, 외부 데이터에 기반한 개인화된 정보로 동적으로 변경하고, 나아가 자동화할 수 있습니다.
