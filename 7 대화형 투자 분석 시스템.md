![n8n context7 μ΄λ―Έμ§€](https://github.com/HunHee-Joung/Study/blob/main/img/AI_ν¬νΈν΄λ¦¬μ¤_ν† λ΅ _λ¶„μ„_2.png)

# π“ Chainlit κΈ°λ° λ€ν™”ν• ν¬μ λ¶„μ„ μ‹μ¤ν… (STREAM λ²„μ „)

μ—¬λ¬ \*\*ν¬μ μ „λ¬Έκ°€(κ°€μΉΒ·μ„±μ¥Β·λ¦¬μ¤ν¬ κ΄€λ¦¬)\*\*κ°€ μ‚¬μ©μμ ν¬νΈν΄λ¦¬μ¤λ¥Ό λ¶„μ„ν•κ³ ,
**μ‹¤μ‹κ°„ μ¤νΈλ¦¬λ° λ€ν™”(Streaming)** λ°©μ‹μΌλ΅ κ²°κ³Όλ¥Ό μ κ³µν•λ” μ‹μ¤ν…μ…λ‹λ‹¤.

* **OpenAI Chat Completions μ¤νΈλ¦¬λ° μ§€μ› (`stream=True`)**
* **Chainlit λ©”μ‹μ§€ ν† ν° μ¤νΈλ¦¬λ° (`msg.stream_token`)**
* **ν¬νΈν΄λ¦¬μ¤ μ‹κ°ν™” (Plotly μ°¨νΈ)**
* **λ§μ¶¤ ν¬νΈν΄λ¦¬μ¤ μ…λ ¥ & μ „λ¬Έκ°€λ³„ λ¶„μ„**
* **λ€ν™” λ§¥λ½(Conversation History) μ μ§€**

---

## π€ μ£Όμ” κΈ°λ¥

### 1. λ‹¤μ¤‘ μ „λ¬Έκ°€ λ¶„μ„

* π’ **κΉ€κ°€μΉ (κ°€μΉν¬μ μ „λ¬Έκ°€)**

  * μ €ν‰κ°€ μμ‚°, ν€λ”λ©ν„Έ, λ°°λ‹Ήμμµλ¥  μ¤‘μ‹¬ ν‰κ°€
* π€ **μ΄μ„±μ¥ (μ„±μ¥ν¬μ μ „λ¬Έκ°€)**

  * κΈ°μ  νμ‹ , μ‹μ¥ ν™•μ¥μ„±, μ„±μ¥ κ°€λ¥μ„± λ¶„μ„
* π›΅οΈ **λ°•λ¦¬μ¤ν¬ (λ¦¬μ¤ν¬ κ΄€λ¦¬ μ „λ¬Έκ°€)**

  * ν¬νΈν΄λ¦¬μ¤ λ¦¬μ¤ν¬ ν‰κ°€, μμ‚° λ¶„μ‚°, λ³€λ™μ„± κ΄€λ¦¬

κ° μ „λ¬Έκ°€κ°€ **μ¤νΈλ¦¬λ° λ°©μ‹**μΌλ΅ λ¶„μ„ κ²°κ³Όλ¥Ό λ³΄μ—¬μ£Όλ©°, μΆ…ν•© λ¶„μ„ λ¦¬ν¬νΈλ„ μ κ³µν•©λ‹λ‹¤.

---

### 2. ν¬νΈν΄λ¦¬μ¤ μ…λ ¥ λ°©μ‹

* **μƒν” ν¬νΈν΄λ¦¬μ¤ μ κ³µ**

  * κ· ν•ν•, μ„±μ¥ν•, λ³΄μν•
* **λ§μ¶¤ μ…λ ¥ μ§€μ›**

  ```text
  ν¬νΈν΄λ¦¬μ¤λ…: My Portfolio
  μ΄μμ‚°: 100000
  ν„κΈ: 5000
  λ¦¬μ¤ν¬μ„±ν–¥: Moderate
  ν¬μλ©ν‘: Growth, Income
  ν¬μκΈ°κ°„: Medium

  λ³΄μ μΆ…λ©:
  AAPL,Apple Inc,100,150.00,Technology
  MSFT,Microsoft Corp,50,300.00,Technology
  SPY,SPDR S&P 500,50,400.00,Diversified
  ```

---

### 3. μ‹κ°ν™” κΈ°λ¥

* π“ **μ„Ήν„°λ³„ λΉ„μ¤‘ νμ΄μ°¨νΈ**
* π“ **μΆ…λ©λ³„ λΉ„μ¤‘ λ°”μ°¨νΈ**
* π“‰ **μ „λ¬Έκ°€λ³„ μ‹ λΆ°λ„ μ‚°μ λ„**

λ¨λ“  μ°¨νΈλ” **Plotly**λ΅ μƒμ„±λμ–΄ Chainlit UIμ— ν‘μ‹λ©λ‹λ‹¤.

---

### 4. μ¤νΈλ¦¬λ° μ‘λ‹µ

* OpenAI APIμ `stream=True` μµμ…μ„ ν™μ©ν•μ—¬
  **ν† ν° λ‹¨μ„λ΅ μ „λ¬Έκ°€ λ¶„μ„μ΄ μ‹¤μ‹κ°„ μ¶λ ¥**λ©λ‹λ‹¤.
* Chainlit λ©”μ‹μ§€ κ°μ²΄(`cl.Message`)μ™€ `msg.stream_token()`μ„ μ‚¬μ©.

---

## π› οΈ μ„¤μΉ λ° μ‹¤ν–‰ λ°©λ²•

### 1. ν•„μ λΌμ΄λΈλ¬λ¦¬ μ„¤μΉ

```bash
pip install chainlit openai plotly pandas
```

### 2. OpenAI API Key μ„¤μ •

```bash
export OPENAI_API_KEY="your_api_key"
```

λλ” `.env` νμΌμ— μ¶”κ°€:

```env
OPENAI_API_KEY=your_api_key
```

### 3. μ‹¤ν–‰

```bash
chainlit run investment_stream_app.py --host 0.0.0.0 --port 8008
```

λΈλΌμ°μ €μ—μ„ μ ‘μ†:

```
http://localhost:8008
```

---

## π“‚ ν”„λ΅μ νΈ κµ¬μ΅°

```text
investment_stream_app.py   # λ©”μΈ μ‹¤ν–‰ νμΌ
.chainlit/config.toml      # Chainlit μ„¤μ • νμΌ (μλ™ μƒμ„±)
```

---

## β™οΈ μ£Όμ” ν΄λμ¤ κµ¬μ΅°

* **λ°μ΄ν„° λ¨λΈ**

  * `PortfolioHolding`: λ³΄μ  μΆ…λ©
  * `Portfolio`: ν¬νΈν΄λ¦¬μ¤ μ •λ³΄
  * `ExpertAnalysis`: μ „λ¬Έκ°€ λ¶„μ„ κ²°κ³Ό

* **μ „λ¬Έκ°€ μ‹μ¤ν…**

  * `InvestmentExpert`: κΈ°λ³Έ ν΄λμ¤ (μ¤νΈλ¦¬λ° λ΅μ§ ν¬ν•¨)
  * `ValueInvestor`: κ°€μΉν¬μ μ „λ¬Έκ°€
  * `GrowthInvestor`: μ„±μ¥ν¬μ μ „λ¬Έκ°€
  * `RiskManager`: λ¦¬μ¤ν¬ κ΄€λ¦¬ μ „λ¬Έκ°€

* **κΈ°νƒ€**

  * `PortfolioVisualizer`: μ°¨νΈ μƒμ„±
  * `SamplePortfolioGenerator`: μƒν” ν¬νΈν΄λ¦¬μ¤ μ κ³µ
  * `handle_investment_question`: μ‚¬μ©μ μ§λ¬Έ μ²λ¦¬ (STREAM)

---

## π“ μ£Όμμ‚¬ν•­

* μ΄ ν”„λ΅μ νΈλ” **ν•™μµ λ° μ—°κµ¬ λ©μ **μΌλ΅ μ‘μ„±λμ—μµλ‹λ‹¤.
* μ κ³µλλ” ν¬μ λ¶„μ„μ€ **μ •λ³΄ μ κ³µμ©**μ΄λ©°, μ‹¤μ  ν¬μ μ†μ‹¤μ— λ€ν• μ±…μ„μ€ ν¬μμ λ³ΈμΈμ—κ² μμµλ‹λ‹¤.

---

## π·οΈ λΌμ΄μ„ μ¤

MIT License



ν›„λ‹λ‹, μ›ν•μ‹λ©΄ μ κ°€ **README.md νμΌ λ²„μ „**μ„ λ°”λ΅ λ§λ“¤μ–΄ λ“λ¦΄ μλ„ μμ–΄μ”. μ§€κΈ λ§λ“¤μ–΄ λ“λ¦΄κΉμ”?
