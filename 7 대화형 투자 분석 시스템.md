![n8n context7 이미지](https://github.com/HunHee-Joung/Study/blob/main/img/AI_포트폴리오_토론_분석_2.png)

# 📘 Chainlit 기반 대화형 투자 분석 시스템 (STREAM 버전)

여러 \*\*투자 전문가(가치·성장·리스크 관리)\*\*가 사용자의 포트폴리오를 분석하고,
**실시간 스트리밍 대화(Streaming)** 방식으로 결과를 제공하는 시스템입니다.

* **OpenAI Chat Completions 스트리밍 지원 (`stream=True`)**
* **Chainlit 메시지 토큰 스트리밍 (`msg.stream_token`)**
* **포트폴리오 시각화 (Plotly 차트)**
* **맞춤 포트폴리오 입력 & 전문가별 분석**
* **대화 맥락(Conversation History) 유지**

---

## 🚀 주요 기능

### 1. 다중 전문가 분석

* 💎 **김가치 (가치투자 전문가)**

  * 저평가 자산, 펀더멘털, 배당수익률 중심 평가
* 🚀 **이성장 (성장투자 전문가)**

  * 기술 혁신, 시장 확장성, 성장 가능성 분석
* 🛡️ **박리스크 (리스크 관리 전문가)**

  * 포트폴리오 리스크 평가, 자산 분산, 변동성 관리

각 전문가가 **스트리밍 방식**으로 분석 결과를 보여주며, 종합 분석 리포트도 제공합니다.

---

### 2. 포트폴리오 입력 방식

* **샘플 포트폴리오 제공**

  * 균형형, 성장형, 보수형
* **맞춤 입력 지원**

  ```text
  포트폴리오명: My Portfolio
  총자산: 100000
  현금: 5000
  리스크성향: Moderate
  투자목표: Growth, Income
  투자기간: Medium

  보유종목:
  AAPL,Apple Inc,100,150.00,Technology
  MSFT,Microsoft Corp,50,300.00,Technology
  SPY,SPDR S&P 500,50,400.00,Diversified
  ```

---

### 3. 시각화 기능

* 📊 **섹터별 비중 파이차트**
* 📈 **종목별 비중 바차트**
* 📉 **전문가별 신뢰도 산점도**

모든 차트는 **Plotly**로 생성되어 Chainlit UI에 표시됩니다.

---

### 4. 스트리밍 응답

* OpenAI API의 `stream=True` 옵션을 활용하여
  **토큰 단위로 전문가 분석이 실시간 출력**됩니다.
* Chainlit 메시지 객체(`cl.Message`)와 `msg.stream_token()`을 사용.

---

## 🛠️ 설치 및 실행 방법

### 1. 필수 라이브러리 설치

```bash
pip install chainlit openai plotly pandas
```

### 2. OpenAI API Key 설정

```bash
export OPENAI_API_KEY="your_api_key"
```

또는 `.env` 파일에 추가:

```env
OPENAI_API_KEY=your_api_key
```

### 3. 실행

```bash
chainlit run investment_stream_app.py --host 0.0.0.0 --port 8008
```

브라우저에서 접속:

```
http://localhost:8008
```

---

## 📂 프로젝트 구조

```text
investment_stream_app.py   # 메인 실행 파일
.chainlit/config.toml      # Chainlit 설정 파일 (자동 생성)
```

---

## ⚙️ 주요 클래스 구조

* **데이터 모델**

  * `PortfolioHolding`: 보유 종목
  * `Portfolio`: 포트폴리오 정보
  * `ExpertAnalysis`: 전문가 분석 결과

* **전문가 시스템**

  * `InvestmentExpert`: 기본 클래스 (스트리밍 로직 포함)
  * `ValueInvestor`: 가치투자 전문가
  * `GrowthInvestor`: 성장투자 전문가
  * `RiskManager`: 리스크 관리 전문가

* **기타**

  * `PortfolioVisualizer`: 차트 생성
  * `SamplePortfolioGenerator`: 샘플 포트폴리오 제공
  * `handle_investment_question`: 사용자 질문 처리 (STREAM)

---

## 📌 주의사항

* 이 프로젝트는 **학습 및 연구 목적**으로 작성되었습니다.
* 제공되는 투자 분석은 **정보 제공용**이며, 실제 투자 손실에 대한 책임은 투자자 본인에게 있습니다.

---

## 🏷️ 라이선스

MIT License



후니님, 원하시면 제가 **README.md 파일 버전**을 바로 만들어 드릴 수도 있어요. 지금 만들어 드릴까요?
